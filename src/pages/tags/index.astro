---
import Container from "../../components/Container.astro";
import BaseLayout from '../../layouts/BaseLayout.astro';
const pageTitle = "Tags Page";
//
import { getCollection } from "astro:content";
const allPosts = await getCollection('blog');
const tags = [...new Set(([] as string[]).concat(...allPosts.flatMap(post => post.data.tags)))] as string[];
//const tagCounts = {};
const tagCounts: { [key: string]: number } = {};
allPosts.forEach(post => {
  post.data.tags.forEach(tag => {
    tagCounts[tag] = (tagCounts[tag] || 0) + 1;
  });
});
const { page } = Astro.props
//
---
<BaseLayout pageTitle={pageTitle}>

        <div data-pagefind-ignore>
          <h1 class="pb-4 text-4xl md:text-6xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500">Tags</h1>
          <p class="prose md:prose-lg lg:prose-xl dark:prose-invert max-w-none"> All our tags, nothing fancy</p>
          <ul class="tag-list">
            {tags.flatMap((tag) => (
                <li class="tag"><a  href={`/tags/${tag}/`} title={`View posts tagged under "${tag.charAt(0).toUpperCase() + tag.slice(1) }"`}>{tag.charAt(0).toUpperCase() + tag.slice(1) }</a> <span class="hidden lg:inline text-[9px] sub">({tagCounts[tag] || 0})</span></li>
            ))}
        </ul>
        </div>


</BaseLayout>
<style>
  .tag-list {
      @apply list-none flex gap-2 flex-wrap
  }
  .tag {
      @apply inline-block text-xl px-4 py-1 rounded-full text-purple-600 bg-purple-50 dark:bg-purple-200 dark:text-purple-800 hover:bg-purple-600 hover:text-purple-300 dark:hover:bg-purple-800 dark:hover:text-purple-200
  }
</style>