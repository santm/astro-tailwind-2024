---
const textLinks: { label: string; href: string; icon_name: string }[] = [
  { label: "Blog", href: "/blog/", icon_name: "phosphor/book-open-text" },
  { label: "Nature", href: "/birdsandwildlife/", icon_name: "phosphor/aperture"},
  { label: "Travel", href: "/travelalbums/", icon_name: "phosphor/camera" },
  { label: "About", href: "/about/", icon_name: "phosphor/users" },
  { label: "Tags", href: "/tags/", icon_name: "phosphor/tag" },
  { label: "Search", href: "/search/", icon_name: "phosphor/search" },
];
const pathname = new URL(Astro.request.url).pathname;
const currentPath = pathname.slice(1); // remove the first "/"
import { Icon } from 'astro-icon/components'
---

<!-- ========== HEADER ========== -->
<header class="relative flex flex-wrap lg:justify-start lg:flex-nowrap z-50 w-full py-4 bg-white/[.8] lg:bg-transparent backdrop-blur-md lg:backdrop-blur-none dark:bg-slate-900 dark:lg:bg-transparent">
  <nav class="max-w-[85rem] flex flex-wrap basis-full items-center w-full mx-auto px-4 sm:px-6 lg:px-8" aria-label="Global">
    <!-- Logo Wrapper -->
    <div class="flex items-center sm:gap-x-2 lg:gap-x-0 xl:gap-x-3">
      <!-- Logo -->
      <a class="flex-none dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600 text-2xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500" href="/">
        SANTM
      </a>
      <!-- End Logo -->
    </div>
    <!-- End Logo Wrapper -->
    <div class="flex items-center lg:gap-x-1 ms-auto lg:order-3">
      <div class="flex items-center relative z-10 before:hidden lg:before:block before:w-px before:h-4 before:bg-gray-500 dark:before:bg-gray-300">
        <div class="lg:ms-1 flex">     
  
        </div>
        <!-- dark mode using astro document -->
        <button id="themeToggle">
          <svg width="30px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path class="sun" fill-rule="evenodd" d="M12 17.5a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zm0 1.5a7 7 0 1 0 0-14 7 7 0 0 0 0 14zm12-7a.8.8 0 0 1-.8.8h-2.4a.8.8 0 0 1 0-1.6h2.4a.8.8 0 0 1 .8.8zM4 12a.8.8 0 0 1-.8.8H.8a.8.8 0 0 1 0-1.6h2.5a.8.8 0 0 1 .8.8zm16.5-8.5a.8.8 0 0 1 0 1l-1.8 1.8a.8.8 0 0 1-1-1l1.7-1.8a.8.8 0 0 1 1 0zM6.3 17.7a.8.8 0 0 1 0 1l-1.7 1.8a.8.8 0 1 1-1-1l1.7-1.8a.8.8 0 0 1 1 0zM12 0a.8.8 0 0 1 .8.8v2.5a.8.8 0 0 1-1.6 0V.8A.8.8 0 0 1 12 0zm0 20a.8.8 0 0 1 .8.8v2.4a.8.8 0 0 1-1.6 0v-2.4a.8.8 0 0 1 .8-.8zM3.5 3.5a.8.8 0 0 1 1 0l1.8 1.8a.8.8 0 1 1-1 1L3.5 4.6a.8.8 0 0 1 0-1zm14.2 14.2a.8.8 0 0 1 1 0l1.8 1.7a.8.8 0 0 1-1 1l-1.8-1.7a.8.8 0 0 1 0-1z"/>
            <path class="moon" fill-rule="evenodd" d="M16.5 6A10.5 10.5 0 0 1 4.7 16.4 8.5 8.5 0 1 0 16.4 4.7l.1 1.3zm-1.7-2a9 9 0 0 1 .2 2 9 9 0 0 1-11 8.8 9.4 9.4 0 0 1-.8-.3c-.4 0-.8.3-.7.7a10 10 0 0 0 .3.8 10 10 0 0 0 9.2 6 10 10 0 0 0 4-19.2 9.7 9.7 0 0 0-.9-.3c-.3-.1-.7.3-.6.7a9 9 0 0 1 .3.8z"/>
          </svg>
        </button>
        <style>
          #themeToggle {
            border: 0;
            background: none;
          }
          .sun { fill: black; }
          .moon { fill: transparent; }
          :global(.dark) .sun { fill: transparent; }
          :global(.dark) .moon { fill: white; }
        </style>
        <script is:inline>
          document.addEventListener('astro:page-load', () => {
    const theme = (() => {
        if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
            return localStorage.getItem('theme');
        }
        if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
            return 'dark';
        }
        return 'light';
    })();

    if (theme === 'light') {
        document.documentElement.classList.remove('dark');
    } else {
        document.documentElement.classList.add('dark');
    }

    // Perform null check before setting localStorage
    if (typeof theme === 'string') {
        window.localStorage.setItem('theme', theme);
    }

    const handleToggleClick = () => {
        const element = document.documentElement;
        element.classList.toggle("dark");
        const isDark = element.classList.contains("dark");
        
        // Perform null check before using localStorage
        if (window.localStorage) {
            localStorage.setItem("theme", isDark ? "dark" : "light");
        }
    }

    // Perform null check before adding event listener
    const themeToggle = document.getElementById("themeToggle");
    if (themeToggle) {
        themeToggle.addEventListener("click", handleToggleClick);
    }
});
</script>
      </div>
      <!-- Collapse Button --><div class="mx-2 lg:before:hidden before:block before:w-px before:h-4 before:bg-gray-500 dark:before:bg-gray-300"></div>
      <div class="ms-1 lg:hidden">
        <button id="menu-button" type="button" class="size-9 inline-flex justify-center items-center gap-x-2 rounded-full border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-transparent dark:border-gray-700 dark:text-white dark:hover:bg-white/10 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600" aria-label="Toggle navigation">
          <Icon name="phosphor/list"  class="flex-shrink-0 size-4"/>
           <!-- <Icon name="phosphor/close" class="flex-shrink-0 size-4 hideen"/>  -->
        </button>

      </div>
      <!-- End Collapse Button -->
    </div>
    <!-- Collapse -->
    <div id="menu" class="hidden overflow-hidden transition-all duration-300 basis-full grow ms-auto lg:block lg:w-auto lg:basis-auto lg:order-2">
      <div class="flex flex-col mt-5 lg:flex-row lg:items-center lg:justify-end lg:mt-0">
        <!-- loop for  menu -->
        <ul class="space-y-6 text-base font-medium tracking-wide lg:flex lg:space-y-0 lg:text-sm">
        {
          textLinks.map(({ label, href, icon_name }) => {
            const menuItemParentPath = href.slice(1, href.lastIndexOf("/")); // Extract the parent path
            const isActive = currentPath.includes(menuItemParentPath);
            return (
            <li class={`block md:px-4 text-lg font-bold ${isActive ? "text-pink-500" : "text-black dark:text-white"}`}>
              <span class="lg:after:block lg:after:mx-auto lg:after:h-[0.15em] lg:after:bottom-0 lg:after:w-0 lg:after:bg-pink-500 lg:after:transition-[all_ease_in_out_300ms] lg:after:mt-1 lg:hover:after:w-full">
                <a href={href} data-astro-prefetch>
                  <Icon name={icon_name} class="inline-flex flex-shrink-0 size-4 lg:hidden"/> {label}</a>
              </span>
            </li>
            );
          })
        }
        </ul>
        <!-- loop for  menu -->
      </div>
    </div>
    <!-- End Collapse -->
  </nav>
</header>
<!-- ========== END HEADER ========== -->